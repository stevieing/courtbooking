<%= content_tag :section, id: id do %>
  <%= content_tag :table do %>
    <%= content_tag(:caption, object.heading) %>
    <% object.rows.each do |row| %>
      <%= content_tag :tr, class: row.klass do %>
        <% row.cells.each do |cell| %>
          <% if row.heading? %>
            <%= content_tag(:th, cell.text.html_safe) %>
          <% else %>
            <% if cell.valid? %>
              <%= content_tag :td, class: cell.klass, rowspan: cell.span do %>
                <% if cell.link? %>
                  <%= link_to cell.text, cell.link, class: cell.klass, remote: remote  %>
                <% else %>
                  <%= cell.text.html_safe %>
                <% end %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>